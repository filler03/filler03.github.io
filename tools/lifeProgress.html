<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Progress Tracker</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        min-height: 100vh;
        color: #e8e8e8;
        padding: 2rem;
    }

    .container {
        max-width: 900px;
        margin: 0 auto;
    }

    h1 {
        text-align: center;
        margin-bottom: 2rem;
        font-size: 2.5rem;
        background: linear-gradient(90deg, #00d9ff, #00ff88);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .input-section {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        padding: 2rem;
        margin-bottom: 2rem;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .input-group {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        align-items: flex-end;
        margin-bottom: 1.5rem;
    }

    .input-field {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .input-field label {
        font-size: 0.9rem;
        color: #aaa;
    }

    .input-field input {
        padding: 0.75rem 1rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.1);
        color: #fff;
        font-size: 1rem;
        outline: none;
        transition: border-color 0.3s, box-shadow 0.3s;
    }

    .input-field input:focus {
        border-color: #00d9ff;
        box-shadow: 0 0 10px rgba(0, 217, 255, 0.3);
    }

    .input-field input[type="date"] {
        cursor: pointer;
    }

    button {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
        transform: translateY(-2px);
    }

    .btn-primary {
        background: linear-gradient(135deg, #00d9ff, #00a8cc);
        color: #000;
        font-weight: 600;
    }

    .btn-primary:hover {
        box-shadow: 0 4px 20px rgba(0, 217, 255, 0.4);
    }

    .btn-add {
        background: linear-gradient(135deg, #00ff88, #00cc6a);
        color: #000;
        font-weight: 600;
    }

    .btn-add:hover {
        box-shadow: 0 4px 20px rgba(0, 255, 136, 0.4);
    }

    .current-age-display {
        text-align: center;
        padding: 1rem;
        background: rgba(0, 217, 255, 0.1);
        border-radius: 12px;
        margin-top: 1rem;
    }

    .current-age-display .age-value {
        font-size: 2rem;
        font-weight: bold;
        color: #00d9ff;
        font-variant-numeric: tabular-nums;
    }

    .cards-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
    }

    .goal-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        padding: 1.5rem;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
    }

    .goal-card.new-card {
        animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .goal-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #00d9ff, #00ff88);
        transition: background 0.3s;
    }

    .goal-card.warning::before {
        background: linear-gradient(90deg, #ffaa00, #ff6600);
    }

    .goal-card.critical::before {
        background: linear-gradient(90deg, #ff4444, #cc0000);
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .goal-age {
        font-size: 1.8rem;
        font-weight: bold;
        color: #00ff88;
    }

    .btn-remove {
        background: rgba(255, 68, 68, 0.2);
        color: #ff6666;
        padding: 0.4rem 0.8rem;
        font-size: 0.85rem;
        border-radius: 6px;
    }

    .btn-remove:hover {
        background: rgba(255, 68, 68, 0.4);
        box-shadow: 0 2px 10px rgba(255, 68, 68, 0.3);
    }

    .time-stats {
        display: flex;
        flex-direction: column;
        gap: 0.3rem;
        margin-bottom: 1.25rem;
    }

    .stat-row {
        font-size: 1rem;
        color: #aaa;
    }

    .stat-value {
        font-weight: bold;
        color: #00d9ff;
        font-variant-numeric: tabular-nums;
    }

    .stat-percent {
        color: #666;
        font-size: 0.85rem;
    }

    .progress-section {
        margin-top: 1rem;
    }

    .progress-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
    }

    .progress-percent {
        font-variant-numeric: tabular-nums;
        min-width: 5em;
        text-align: right;
    }

    .progress-bar {
        height: 12px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 6px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #00d9ff, #00ff88);
        border-radius: 6px;
        transition: width 0.1s linear;
    }

    .goal-card.warning .progress-fill {
        background: linear-gradient(90deg, #ffaa00, #ff6600);
    }

    .goal-card.critical .progress-fill {
        background: linear-gradient(90deg, #ff4444, #cc0000);
    }

    .empty-state {
        text-align: center;
        padding: 3rem;
        color: #666;
    }

    .empty-state svg {
        width: 80px;
        height: 80px;
        margin-bottom: 1rem;
        opacity: 0.5;
    }

    .hidden {
        display: none !important;
    }

    @media (max-width: 600px) {
        body {
            padding: 1rem;
        }

        h1 {
            font-size: 1.8rem;
        }

        .input-group {
            flex-direction: column;
        }

        .input-field {
            width: 100%;
        }

        button {
            width: 100%;
        }
    }
</style>

</head>
<body>
    <div class="container">
        <h1>Life Progress Tracker</h1>

    <div class="input-section">
        <div class="input-group">
            <div class="input-field" style="flex: 1;">
                <label for="birthdate">Your Birthdate</label>
                <input type="date" id="birthdate">
            </div>
            <button class="btn-primary" onclick="setBirthdate()">Set Birthdate</button>
        </div>

        <div id="currentAgeSection" class="current-age-display hidden">
            <div>Your current age</div>
            <div class="age-value" id="currentAge">--</div>
        </div>

        <div id="addGoalSection" class="hidden" style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
            <div class="input-group">
                <div class="input-field" style="flex: 1;">
                    <label for="goalAge">Live Until Age</label>
                    <input type="number" id="goalAge" placeholder="e.g., 80" min="1" max="1000">
                </div>
                <button class="btn-add" onclick="addGoal()">Add</button>
            </div>
        </div>
    </div>

    <div id="emptyState" class="empty-state">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <p>Enter your birthdate and add age goals to see your life progress</p>
    </div>

    <div id="cardsContainer" class="cards-container"></div>
</div>

<script>
    let birthdate = null;
    let goals = [];
    let updateInterval = null;

    // Try to load saved data
    function loadSavedData() {
        const savedBirthdate = localStorage.getItem('birthdate');
        const savedGoals = localStorage.getItem('goals');
        
        if (savedBirthdate) {
            birthdate = new Date(savedBirthdate);
            document.getElementById('birthdate').value = savedBirthdate;
            showCurrentAge();
        }
        
        if (savedGoals) {
            goals = JSON.parse(savedGoals);
            rebuildCards();
        }
    }

    function saveData() {
        if (birthdate) {
            localStorage.setItem('birthdate', birthdate.toISOString().split('T')[0]);
        }
        localStorage.setItem('goals', JSON.stringify(goals));
    }

    function setBirthdate() {
        const input = document.getElementById('birthdate').value;
        if (!input) {
            alert('Please select your birthdate');
            return;
        }
        
        birthdate = new Date(input + 'T00:00:00');
        
        if (birthdate > new Date()) {
            alert('Birthdate cannot be in the future');
            return;
        }
        
        showCurrentAge();
        saveData();
        rebuildCards();
    }

    function showCurrentAge() {
        document.getElementById('currentAgeSection').classList.remove('hidden');
        document.getElementById('addGoalSection').classList.remove('hidden');
        updateValues();
        
        // Start interval if not already running
        if (!updateInterval) {
            updateInterval = setInterval(updateValues, 1000);
        }
    }

    function updateValues() {
        // Update current age
        const now = new Date();
        const ageInYears = (now - birthdate) / (1000 * 60 * 60 * 24 * 365.25);
        document.getElementById('currentAge').textContent = ageInYears.toFixed(8) + ' years';
        
        // Update each card's values without rebuilding DOM
        goals.forEach(goalAge => {
            const card = document.getElementById(`card-${goalAge}`);
            if (!card) return;
            
            const timeLeft = calculateTimeLeft(goalAge);
            
            // Update stat values
            card.querySelector('.years-value').textContent = formatNumber(timeLeft.years);
            card.querySelector('.months-value').textContent = formatNumber(timeLeft.months);
            card.querySelector('.weeks-value').textContent = formatNumber(timeLeft.weeks);
            card.querySelector('.days-value').textContent = formatNumber(timeLeft.days);
            card.querySelector('.hours-value').textContent = formatNumber(timeLeft.hours);
            card.querySelector('.minutes-value').textContent = formatNumber(timeLeft.minutes);
            card.querySelector('.seconds-value').textContent = formatWholeNumber(timeLeft.seconds);
            
            // Update percentages
            card.querySelector('.year-percent').textContent = timeLeft.yearPercent;
            card.querySelector('.month-percent').textContent = timeLeft.monthPercent;
            card.querySelector('.week-percent').textContent = timeLeft.weekPercent;
            card.querySelector('.day-percent').textContent = timeLeft.dayPercent;
            card.querySelector('.hour-percent').textContent = timeLeft.hourPercent;
            card.querySelector('.minute-percent').textContent = timeLeft.minutePercent;
            card.querySelector('.second-percent').textContent = timeLeft.secondPercent;
            
            // Update progress
            card.querySelector('.progress-percent').textContent = timeLeft.percentage.toFixed(6) + '%';
            card.querySelector('.progress-fill').style.width = timeLeft.percentage + '%';
            
            // Update card class for color coding
            card.classList.remove('warning', 'critical');
            if (timeLeft.percentage >= 90) {
                card.classList.add('critical');
            } else if (timeLeft.percentage >= 75) {
                card.classList.add('warning');
            }
        });
    }

    function addGoal() {
        const goalInput = document.getElementById('goalAge');
        const goalAge = parseInt(goalInput.value);
        
        if (!goalAge || goalAge < 1 || goalAge > 1000) {
            alert('Please enter a valid age between 1 and 1000');
            return;
        }
        
        const currentAge = (new Date() - birthdate) / (1000 * 60 * 60 * 24 * 365.25);
        
        if (goalAge <= currentAge) {
            alert('Goal age must be greater than your current age');
            return;
        }
        
        if (goals.includes(goalAge)) {
            alert('This goal already exists');
            return;
        }
        
        goals.push(goalAge);
        goals.sort((a, b) => a - b);
        goalInput.value = '';
        
        saveData();
        rebuildCards();
    }

    function removeGoal(age) {
        goals = goals.filter(g => g !== age);
        saveData();
        rebuildCards();
    }

    function calculateTimeLeft(goalAge) {
        const now = new Date();
        const goalDate = new Date(birthdate);
        goalDate.setFullYear(goalDate.getFullYear() + goalAge);
        
        const msLeft = goalDate - now;
        
        if (msLeft <= 0) {
            return { years: 0, months: 0, weeks: 0, days: 0, hours: 0, minutes: 0, seconds: 0, yearPercent: '0', monthPercent: '0', weekPercent: '0', dayPercent: '0', hourPercent: '0', minutePercent: '0', secondPercent: '0', percentage: 100, expired: true };
        }
        
        const days = msLeft / (1000 * 60 * 60 * 24);
        const years = days / 365.25;
        const weeks = days / 7;
        const months = days / 30.44; // Average days per month
        const hours = msLeft / (1000 * 60 * 60);
        const minutes = msLeft / (1000 * 60);
        const seconds = Math.floor(msLeft / 1000);
        
        // Calculate what percentage of remaining life each unit represents
        const yearPercent = years > 0 ? (100 / years).toFixed(3) : '0';
        const monthPercent = (100 / months).toFixed(4);
        const weekPercent = (100 / weeks).toFixed(5);
        const dayPercent = (100 / days).toFixed(6);
        const hourPercent = (100 / hours).toFixed(8);
        const minutePercent = (100 / minutes).toFixed(10);
        const secondPercent = (100 / seconds).toFixed(12);
        
        // Calculate percentage of life lived toward this goal
        const totalMs = goalDate - birthdate;
        const livedMs = now - birthdate;
        const percentage = (livedMs / totalMs) * 100;
        
        return { years, months, weeks, days, hours, minutes, seconds, yearPercent, monthPercent, weekPercent, dayPercent, hourPercent, minutePercent, secondPercent, percentage: Math.min(percentage, 100), expired: false };
    }

    function formatNumber(num) {
        return num.toLocaleString(undefined, { minimumFractionDigits: 3, maximumFractionDigits: 3 });
    }

    function formatWholeNumber(num) {
        return num.toLocaleString();
    }

    function createCardElement(goalAge) {
        const timeLeft = calculateTimeLeft(goalAge);
        
        const card = document.createElement('div');
        card.id = `card-${goalAge}`;
        card.className = 'goal-card new-card';
        
        if (timeLeft.percentage >= 90) card.classList.add('critical');
        else if (timeLeft.percentage >= 75) card.classList.add('warning');
        
        card.innerHTML = `
            <div class="card-header">
                <span class="goal-age">Age ${goalAge}</span>
                <button class="btn-remove" onclick="removeGoal(${goalAge})">Remove</button>
            </div>
            
            <div class="time-stats">
                <div class="stat-row"><span class="stat-value years-value">${formatNumber(timeLeft.years)}</span> years left <span class="stat-percent">— each is <span class="year-percent">${timeLeft.yearPercent}</span>% of remaining</span></div>
                <div class="stat-row"><span class="stat-value months-value">${formatNumber(timeLeft.months)}</span> months left <span class="stat-percent">— each is <span class="month-percent">${timeLeft.monthPercent}</span>% of remaining</span></div>
                <div class="stat-row"><span class="stat-value weeks-value">${formatNumber(timeLeft.weeks)}</span> weeks left <span class="stat-percent">— each is <span class="week-percent">${timeLeft.weekPercent}</span>% of remaining</span></div>
                <div class="stat-row"><span class="stat-value days-value">${formatNumber(timeLeft.days)}</span> days left <span class="stat-percent">— each is <span class="day-percent">${timeLeft.dayPercent}</span>% of remaining</span></div>
                <div class="stat-row"><span class="stat-value hours-value">${formatNumber(timeLeft.hours)}</span> hours left <span class="stat-percent">— each is <span class="hour-percent">${timeLeft.hourPercent}</span>% of remaining</span></div>
                <div class="stat-row"><span class="stat-value minutes-value">${formatNumber(timeLeft.minutes)}</span> minutes left <span class="stat-percent">— each is <span class="minute-percent">${timeLeft.minutePercent}</span>% of remaining</span></div>
                <div class="stat-row"><span class="stat-value seconds-value">${formatWholeNumber(timeLeft.seconds)}</span> seconds left <span class="stat-percent">— each is <span class="second-percent">${timeLeft.secondPercent}</span>% of remaining</span></div>
            </div>
            
            <div class="progress-section">
                <div class="progress-header">
                    <span>Progress to Age ${goalAge}</span>
                    <span class="progress-percent">${timeLeft.percentage.toFixed(6)}%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${timeLeft.percentage}%"></div>
                </div>
            </div>
        `;
        
        // Remove the animation class after it plays
        setTimeout(() => card.classList.remove('new-card'), 300);
        
        return card;
    }

    function rebuildCards() {
        const container = document.getElementById('cardsContainer');
        const emptyState = document.getElementById('emptyState');
        
        if (!birthdate || goals.length === 0) {
            container.innerHTML = '';
            emptyState.classList.remove('hidden');
            return;
        }
        
        emptyState.classList.add('hidden');
        container.innerHTML = '';
        
        goals.forEach(goalAge => {
            container.appendChild(createCardElement(goalAge));
        });
    }

    // Initialize
    loadSavedData();
</script>

</body>
</html>